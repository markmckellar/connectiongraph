!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.test_mock=t()}}(function(){return function(){function t(e,n,o){function r(s,c){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!c&&a)return a(s,!0);if(i)return i(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){return r(e[s][1][t]||t)},u,u.exports,t,e,n,o)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<o.length;s++)r(o[s]);return r}return t}()({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./canvasmouse"),r=t("./mouseeventhandlerworldobject"),i=t("../worlddisplay"),s=function(){function t(t,e){this.canvasName=t,this.isVisable=!0,this.isDrawable=!0,this.canvas=document.getElementById(this.canvasName),this.context=this.canvas.getContext("2d"),this.canvasMouse=new o.CanvasMouse(e,this,new r.MouseEventHandlerWorldObject)}return t.prototype.clearCanvas=function(){this.isVisable&&this.isDrawable&&(this.context.clearRect(0,0,this.getWidth(),this.getHeight()),this.context.fillStyle=i.WorldDisplay.getColorFromString("ffffffff"),this.context.fillRect(0,0,this.getWidth(),this.getHeight()))},t.prototype.getCanvas=function(){return this.canvas},t.prototype.getContext=function(){return this.context},t.prototype.getWidth=function(){return this.canvas.width},t.prototype.getHeight=function(){return this.canvas.height},t.prototype.isCanvasVisable=function(){return this._isVisable},t.prototype.isCanvasDrawable=function(){return this._isDrawable},Object.defineProperty(t.prototype,"canvasName",{get:function(){return this._canvasName},set:function(t){this._canvasName=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvas",{get:function(){return this._canvas},set:function(t){this._canvas=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"context",{get:function(){return this._context},set:function(t){this._context=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isVisable",{get:function(){return this._isVisable},set:function(t){this._isVisable=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDrawable",{get:function(){return this._isDrawable},set:function(t){this._isDrawable=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"canvasMouse",{get:function(){return this._canvasMouse},set:function(t){this._canvasMouse=t},enumerable:!0,configurable:!0}),t}();n.CanvasHolderHTML=s},{"../worlddisplay":10,"./canvasmouse":2,"./mouseeventhandlerworldobject":3}],2:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../world/worldposition"),r=function(){function t(t,e,n){if(this.canvasholderHTML=e,this.mouseEventHandler=n,e.isCanvasVisable()){this.offset=this.getCanvasOffset();var o=this;this.canvasholderHTML.canvas.addEventListener("pointerdown",function(e){o.pointerDownEvent(t,o,e)},!1),this.canvasholderHTML.canvas.addEventListener("pointermove",function(e){o.pointerMoveEvent(t,o,e)},!1),this.canvasholderHTML.canvas.addEventListener("pointerup",function(e){o.pointerUpEvent(t,o,e)},!1)}}return t.prototype.getCanvasOffset=function(){var t=0,e=0,n=this.canvasholderHTML.canvas;do{isNaN(n.offsetLeft)||(t+=n.offsetLeft),isNaN(n.offsetTop)||(e+=n.offsetTop);var r=n.offsetParent;n=r.hasOwnProperty("offsetParent")?r:null}while(n);return new o.WorldPosition(t,e)},t.prototype.pointerDownEvent=function(t,e,n){this.mouseEventHandler.pointerDownEvent(t,e,n)},t.prototype.pointerMoveEvent=function(t,e,n){this.mouseEventHandler.pointerMoveEvent(t,e,n)},t.prototype.pointerUpEvent=function(t,e,n){this.mouseEventHandler.pointerUpEvent(t,e,n)},Object.defineProperty(t.prototype,"offset",{get:function(){return this._offset},set:function(t){this._offset=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mouseEventHandler",{get:function(){return this._mouseEventHandler},set:function(t){this._mouseEventHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$canvasholderHTML",{get:function(){return this.canvasholderHTML},set:function(t){this.canvasholderHTML=t},enumerable:!0,configurable:!0}),t}();n.CanvasMouse=r},{"../../world/worldposition":27}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./mousestatus"),r=t("../worlddisplay"),i=function(){function t(){this.mouseStatus=new o.MouseStatus,this.currentWorldObject=null,this.lastWorldObject=null}return t.prototype.getMouseStatus=function(){return this.mouseStatus},t.prototype.worldObjectSelected=function(t,e,n){},t.prototype.worldObjectDeselected=function(t,e){},t.prototype.getCurrentWorldObject=function(){return this.currentWorldObject},t.prototype.pointerDownEvent=function(t,e,n){var o=r.WorldDisplay.getWorldPositionFromMouseEvent(t,e,n);console.log("pointerDownEvent:"+JSON.stringify(o)),this.mouseStatus.isDown=!0,this.mouseStatus.startPosition=o,this.mouseStatus.position=o,null!=this.currentWorldObject&&(this.currentWorldObject.setAnimated(!0),this.currentWorldObject.setSelected(!1),this.currentWorldObject=null);var i=t.getWorldObjectContainingPosition(o);null!=i&&i!=this.lastWorldObject&&(console.log("pointerDownEvent:clickWorldObject="+i.getWorldId().id),this.currentWorldObject=i,this.mouseStatus.startPosition=o.clone(),this.currentWorldObject.setSelected(!0),this.mouseStatus.clickOffset=this.currentWorldObject.getWorldPosition().getDelta(o),this.currentWorldObject.setAnimated(!1),this.worldObjectSelected(t,n,this.currentWorldObject),this.currentWorldObject.getWorldObjectEventHandler().pointerDownEvent(t,e,n)),null==i&&this.worldObjectDeselected(t,n),this.lastWorldObject&&(this.worldObjectDeselected(t,n),this.lastWorldObject.setSelected(!1),this.lastWorldObject=null),t.worldEngine.pointerDownEngineEvent(t,e,n,this)},t.prototype.pointerMoveEvent=function(t,e,n){var o=r.WorldDisplay.getWorldPositionFromMouseEvent(t,e,n);this.mouseStatus.position=o,this.mouseStatus.isDown&&(this.worldObjectDeselected(t,n),null!=this.currentWorldObject&&(this.currentWorldObject.setAnimated(!1),this.currentWorldObject.getWorldObjectEventHandler().pointerMoveEvent(t,e,n)),this.mouseStatus.position=this.mouseStatus.position),t.worldEngine.pointerMoveEngineEvent(t,e,n,this)},t.prototype.pointerUpEvent=function(t,e,n){var o=r.WorldDisplay.getWorldPositionFromMouseEvent(t,e,n);this.mouseStatus.position=o,null!=this.currentWorldObject&&(this.currentWorldObject.setAnimated(!0),this.lastWorldObject=this.currentWorldObject,this.currentWorldObject.getWorldObjectEventHandler().pointerUpEvent(t,e,n),this.currentWorldObject=null),this.mouseStatus.isDown=!1,t.worldEngine.pointerUpEngineEvent(t,e,n,this)},Object.defineProperty(t.prototype,"mouseStatus",{get:function(){return this._mouseStatus},set:function(t){this._mouseStatus=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentWorldObject",{get:function(){return this._currentWorldObject},set:function(t){this._currentWorldObject=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastWorldObject",{get:function(){return this._lastWorldObject},set:function(t){this._lastWorldObject=t},enumerable:!0,configurable:!0}),t}();n.MouseEventHandlerWorldObject=i},{"../worlddisplay":10,"./mousestatus":4}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../world/worldposition"),r=function(){function t(){this.isDown=!1,this.startPosition=new o.WorldPosition(0,0),this.position=new o.WorldPosition(0,0),this.clickOffset=new o.WorldPosition(0,0)}return Object.defineProperty(t.prototype,"isDown",{get:function(){return this._isDown},set:function(t){this._isDown=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startPosition",{get:function(){return this._startPosition},set:function(t){this._startPosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"clickOffset",{get:function(){return this._clickOffset},set:function(t){this._clickOffset=t},enumerable:!0,configurable:!0}),t}();n.MouseStatus=r},{"../../world/worldposition":27}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../worlddisplay"),r=function(){function t(){this.circleEngineShape=null}return t.prototype.init=function(t,e){this.circleEngineShape=t},Object.defineProperty(t.prototype,"circleEngineShape",{get:function(){return this._circleEngineShape},set:function(t){this._circleEngineShape=t},enumerable:!0,configurable:!0}),t.prototype.draw=function(t){if(!this.circleEngineShape)throw Error("CircleDisplayShape:CircleEngineShape is not set, was init called?");t.fillStyle=o.WorldDisplay.getColorFromString("ff0000ff"),t.strokeStyle=o.WorldDisplay.getColorFromString("0000ffff");var e=this.circleEngineShape.getWorldPosition();t.beginPath(),t.arc(e.x,e.y,this.circleEngineShape.getRadius(),0,2*Math.PI,!1),t.closePath(),t.fill(),t.lineWidth=2,t.stroke()},t}();n.CircleDisplayShape=r},{"../worlddisplay":10}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../worlddisplay"),r=function(){function t(){this.engineConnector=null}return t.prototype.init=function(t,e){this.engineConnector=t},t.prototype.draw=function(t){t.fillStyle=o.WorldDisplay.getColorFromString("ff0000ff"),t.strokeStyle=o.WorldDisplay.getColorFromString("0000ffff"),t.lineWidth=2;for(var e=0;e<this.engineConnector.getEngineConnectorDefArray().length;e++)o.WorldDisplay.drawConnectedLine(t,[this.engineConnector.getEngineConnectorDefArray()[e].engineShape.getWorldPosition(),this.engineConnector.getWorldPosition()])},Object.defineProperty(t.prototype,"engineConnector",{get:function(){return this._engineConnector},set:function(t){this._engineConnector=t},enumerable:!0,configurable:!0}),t}();n.LineConnectorDisplay=r},{"../worlddisplay":10}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../worlddisplay"),r=function(){function t(){this.polygonEngineShape=null}return t.prototype.init=function(t,e){this.polygonEngineShape=t},Object.defineProperty(t.prototype,"polygonEngineShape",{get:function(){return this._polygonEngineShape},set:function(t){this._polygonEngineShape=t},enumerable:!0,configurable:!0}),t.prototype.draw=function(t){if(!this.polygonEngineShape)throw Error("PolygonDisplayShape:PolygonEngineShape is not set, was init called?");t.fillStyle=o.WorldDisplay.getColorFromString("ff0000ff"),t.strokeStyle=o.WorldDisplay.getColorFromString("0000ffff"),t.lineWidth=2,o.WorldDisplay.drawOutlinedShape(t,this.polygonEngineShape.getPolygonPoints())},t}();n.PolygonDisplayShape=r},{"../worlddisplay":10}],8:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../worlddisplay"),r=function(){function t(){this.rectangleEngineShape=null}return t.prototype.init=function(t,e){this.rectangleEngineShape=t},Object.defineProperty(t.prototype,"rectangleEngineShape",{get:function(){return this._rectangleEngineShape},set:function(t){this._rectangleEngineShape=t},enumerable:!0,configurable:!0}),t.prototype.draw=function(t){if(!this.rectangleEngineShape)throw Error("RectangleDisplayShape:rectangleEngineShape is not set, was init called?");t.fillStyle=o.WorldDisplay.getColorFromString("ff0000ff"),t.strokeStyle=o.WorldDisplay.getColorFromString("0000ffff"),t.lineWidth=2,o.WorldDisplay.drawOutlinedShape(t,this.rectangleEngineShape.getShapePoints())},t}();n.RectangleDisplayShape=r},{"../worlddisplay":10}],9:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../worlddisplay"),r=function(){function t(t,e){this.rectangleEngineShape=null,this.rectangleDisplayShape=t,this.displayText=e,this.textImageData=null}return t.prototype.getText=function(){return this.displayText},t.prototype.setText=function(t){this.textImageData=null,this.displayText=t},t.prototype.init=function(t,e){this.rectangleEngineShape=t,this.rectangleDisplayShape.init(this.rectangleEngineShape,e);var n={pointerDownEvent:function(t,e,n){console.log("LOOOOOLZZZZZ! HEY FELLA XXXXXXX"),console.log("setSize:"+JSON.stringify({width:this.width,height:this.height}))},pointerMoveEvent:function(t,e,n){},pointerUpEvent:function(t,e,n){}};this.rectangleEngineShape.setWorldObjectEventHandler(n)},Object.defineProperty(t.prototype,"textImageData",{get:function(){return this._textImageData},set:function(t){this._textImageData=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rectangleEngineShape",{get:function(){return this._rectangleEngineShape},set:function(t){this._rectangleEngineShape=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rectangleDisplayShape",{get:function(){return this._rectangleDisplayShape},set:function(t){this._rectangleDisplayShape=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayText",{get:function(){return this._displayText},set:function(t){this._displayText=t},enumerable:!0,configurable:!0}),t.prototype.draw=function(t){if(!this.rectangleEngineShape)throw Error("RectangleDisplayShape:rectangleEngineShape is not set, was init called?");var e=this.rectangleEngineShape.getWorldPosition().x,n=this.rectangleEngineShape.getWorldPosition().y,r=!1;if(null==this.textImageData&&(r=!0),r){this.setContextFont(t,"bold","Arial",15,"000000ff");var i=o.WorldDisplay.metricsTextMutipleLines(t,this.displayText,15,"\n");new o.Size(i.width+10,i.height+10);this.rectangleEngineShape.setSize(i.width+10,i.height+10),this.rectangleDisplayShape.draw(t),this.setContextFont(t,"bold","Arial",15,"000000ff"),o.WorldDisplay.drawTextMutipleLines(t,this.displayText,e,n-i.height/2+15,15,"\n"),this.textImageData=t.getImageData(e-i.width/2,n-i.height/2,i.width,i.height)}this.rectangleDisplayShape.draw(t),t.putImageData(this.textImageData,e-this.textImageData.width/2,n-this.textImageData.height/2),this.rectangleEngineShape.stopRotation()},t.prototype.setContextFont=function(t,e,n,r,i){t.font=e+" "+r+"px "+n,t.textAlign="center",t.fillStyle=o.WorldDisplay.getColorFromString(i)},t}();n.TextDisplayShape=r},{"../worlddisplay":10}],10:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../world/worldposition"),r=function(){function t(t,e){this.width=t,this.height=e}return Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!0,configurable:!0}),t}();n.Size=r;var i=function(){function t(){}return t.getWorldPositionArrayFromObjects=function(t){for(var e=new Array,n=0;n<t.length;n++)e.push(t[n].getWorldPosition());return e},t.drawTextMutipleLines=function(t,e,n,o,r,i){for(var s=e.split(i),c=0;c<s.length;c++)t.fillText(s[c],n,o),o+=r},t.metricsTextMutipleLines=function(t,e,n,o){for(var i=e.split(o),s=0,c=n/2,a=0;a<i.length;a++){var l=t.measureText(i[a]);l.width>s&&(s=l.width),c+=n}return new r(s+1,c)},t.getColorFromString=function(t){return 6==t.length&&(t+="ff"),"rgba("+parseInt(t.substring(0,2),16)+","+parseInt(t.substring(2,4),16)+","+parseInt(t.substring(4,6),16)+","+parseInt(t.substring(6,8),16)/255+")"},t.getWorldPositionFromMouseEvent=function(t,e,n){return new o.WorldPosition(n.pageX-e.offset.x,n.pageY-e.offset.y)},t.getPolygonPoints=function(t,e,n,r){for(var i=Array(),s=0,c=2*Math.PI/e,a=0;a<e;a++)i.push(new o.WorldPosition(r.x+n*Math.cos(s),r.y+n*Math.sin(s))),s+=c;return i},t.drawConnectedLine=function(t,e){t.beginPath();for(var n=0;n<e.length;n++){var o=e[n];0==n?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y)}t.stroke()},t.drawOutlinedShape=function(t,e){t.beginPath();for(var n=0;n<e.length;n++){var o=e[n];0==n?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y)}t.closePath(),t.fill(),t.stroke()},t.getAveragePostionFromPositionList=function(t){for(var e=0,n=0,r=0;r<t.length;r++){var i=t[r];e+=i.x,n+=i.y}return e/=t.length,n/=t.length,new o.WorldPosition(e,n)},t.getCirclePositionList=function(t,e){for(var n=new Array,r=360/e,i=0;i<=360;i+=r){var s=i*(Math.PI/180);n.push(new o.WorldPosition(t*Math.cos(s),t*Math.sin(s)))}return n},t.getTrianglePositionList=function(t,e){var n=new Array;return n.push(new o.WorldPosition(0,-e/2)),n.push(new o.WorldPosition(t/2,e/2)),n.push(new o.WorldPosition(-t/2,e/2)),n.push(new o.WorldPosition(0,-e/2)),n},t.getRectanglePositionList=function(t,e){var n=new Array;return n.push(new o.WorldPosition(-t/2,-e/2)),n.push(new o.WorldPosition(t/2,-e/2)),n.push(new o.WorldPosition(t/2,e/2)),n.push(new o.WorldPosition(-t/2,e/2)),n.push(new o.WorldPosition(-t/2,-e/2)),n},t.getArcPositionList=function(t,e,n,r){var i=new Array,s=Math.abs(t-e),c=s/r;i.push(new o.WorldPosition(0,0));for(var a=e;a<=t&&c>0;a+=c){a+c>t&&a!=t&&(a=t);var l=a*(Math.PI/180);i.push(new o.WorldPosition(n*Math.cos(l),n*Math.sin(l)))}return i.push(new o.WorldPosition(0,0)),i},t.fillTextMutipleLines=function(t,e,n,o,r,i){for(var s=e.split(i),c=0;c<s.length;c++)t.fillText(s[c],n,o),o+=r;t.fillText("",n,o)},t.roundedRect=function(t,e,n,o,r,i,s,c,a){o<2*i&&(i=o/2),r<2*i&&(i=r/2),t.beginPath(),t.moveTo(e+i,n),t.arcTo(e+o,n,e+o,n+r,i),t.arcTo(e+o,n+r,e,n+r,i),t.arcTo(e,n+r,e,n,i),t.arcTo(e,n,e+o,n,i),t.closePath(),t.lineWidth=s,t.fillStyle=a,t.strokeStyle=c,t.stroke(),t.fill()},t}();n.WorldDisplay=i},{"../world/worldposition":27}],11:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../world/worldposition"),r=function(){function t(){}return t.prototype.positionConnectorShape=function(t,e){e.engineShape.isSelected()?t.translate(new o.WorldPosition(e.engineShape.getWorldPosition().x,t.getWorldPosition().y)):e.engineShape.translate(new o.WorldPosition(t.getWorldPosition().x,e.engineShape.getWorldPosition().y))},t}();n.PositionerLockX=r},{"../../../world/worldposition":27}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../../world/worldposition"),r=function(){function t(){}return t.prototype.positionConnectorShape=function(t,e){e.engineShape.isSelected()?t.translate(new o.WorldPosition(t.getWorldPosition().x,e.engineShape.getWorldPosition().y)):e.engineShape.translate(new o.WorldPosition(e.engineShape.getWorldPosition().x,t.getWorldPosition().y))},t}();n.PositionerLockY=r},{"../../../world/worldposition":27}],13:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e,n,o){this.engineShape=t,this.connectorPositioner=e,this.length=n,this.stiffness=o}return t.getWorldPositionArrayFromEngineDefs=function(t){for(var e=new Array,n=0;n<t.length;n++)e.push(t[n].engineShape.getWorldPosition());return e},Object.defineProperty(t.prototype,"connectorPositioner",{get:function(){return this._connectorPositioner},set:function(t){this._connectorPositioner=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._length},set:function(t){this._length=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stiffness",{get:function(){return this._stiffness},set:function(t){this._stiffness=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"engineShape",{get:function(){return this._engineShape},set:function(t){this._engineShape=t},enumerable:!0,configurable:!0}),t}();n.EngineConnectorDef=o},{}],14:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("../../world/worldid"),r=t("../../world/worldposition"),i=t("./shapes/mockcircle"),s=t("./shapes/mockrectangle"),c=t("./shapes/mockpolygon"),a=t("../../display/drawableshapes/circledisplayshape"),l=t("./shapes/mockrectangletext"),u=t("./shapes/mockconnectordef"),p=t("./shapes/mockconnector"),d=function(){function t(){this.mouseAnchor=new i.MockCircle(new o.WorldId("mouseAnchor"),new a.CircleDisplayShape,5,8,new r.WorldPosition(-10,-10),{restitution:.9,isSensor:!0},this),this.connectorArray=new Array}return t.prototype.getMouseAnchor=function(){return this.mouseAnchor},t.prototype.createBounds=function(t,e,n){},t.prototype.startEngine=function(){var t=this;setInterval(function(){for(var e=0;e<t.connectorArray.length;e++)for(var n=t.connectorArray[e],o=0;o<n.getEngineConnectorDefArray().length;o++){var r=n.getEngineConnectorDefArray()[o];r.connectorPositioner.positionConnectorShape(n,r)}},1e3/30)},t.prototype.createCircle=function(t,e,n,o,r,s){return new i.MockCircle(t,e,n,o,r,s,this)},t.prototype.createRectangle=function(t,e,n,o,r,i){return new s.MockRectangle(t,e,n,o,r,i,this)},t.prototype.createConnector=function(t,e,n,o,r){for(var i=new Array,s=0;s<o.length;s++)i.push(new u.MockConnectorDef(this,o[s]));var c=new p.MockConnector(t,e,n,i,r,this);return this.connectorArray.push(c),c},t.prototype.createTextBox=function(t,e,n,o,r,i){return new l.MockRectangleText(t,e,n,o,r,i,this)},t.prototype.createPolygon=function(t,e,n,o,r,i){return new c.MockPolygon(t,e,n,o,r,i,this)},t.prototype.pointerDownEngineEvent=function(t,e,n,o){},t.prototype.pointerMoveEngineEvent=function(t,e,n,o){var i=new r.WorldPosition(n.x-e.offset.x,n.y-e.offset.y);if(this.mouseAnchor.translate(i),null!=o.getCurrentWorldObject()){var s=o.getMouseStatus().startPosition.getDelta(o.getMouseStatus().position),c=o.getMouseStatus().startPosition.x-s.x+o.getMouseStatus().clickOffset.x,a=o.getMouseStatus().startPosition.y-s.y+o.getMouseStatus().clickOffset.y;o.getCurrentWorldObject().setWorldPosition(new r.WorldPosition(c,a))}},t.prototype.pointerUpEngineEvent=function(t,e,n,o){},Object.defineProperty(t.prototype,"mouseAnchor",{get:function(){return this._mouseAnchor},set:function(t){this._mouseAnchor=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"connectorArray",{get:function(){return this._connectorArray},set:function(t){this._connectorArray=t},enumerable:!0,configurable:!0}),t}();n.MockEngine=d},{"../../display/drawableshapes/circledisplayshape":5,"../../world/worldid":25,"../../world/worldposition":27,"./shapes/mockcircle":15,"./shapes/mockconnector":16,"./shapes/mockconnectordef":17,"./shapes/mockpolygon":18,"./shapes/mockrectangle":19,"./shapes/mockrectangletext":20}],15:[function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("./mockshape"),i=t("../../../display/worlddisplay"),s=function(t){function e(e,n,o,r,i,s,c){var a=t.call(this,e,n,i,s)||this;return a.radius=o,a.curvePoints=r,n.init(a,s),a}return o(e,t),e.prototype.containsWorldPosition=function(t){return this.getWorldPosition().getDistance(t)<=this.radius},e.prototype.getRadius=function(){return this.radius},e.prototype.getShapePoints=function(){return i.WorldDisplay.getCirclePositionList(this.radius,this.curvePoints)},Object.defineProperty(e.prototype,"curvePoints",{get:function(){return this._curvePoints},set:function(t){this._curvePoints=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t},enumerable:!0,configurable:!0}),e}(r.MockShape);n.MockCircle=s},{"../../../display/worlddisplay":10,"./mockshape":21}],16:[function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("./mockshape"),i=function(t){function e(e,n,o,r,i,s){var c=t.call(this,e,n,o.getWorldPosition(),i)||this;return c.drawableConnector=n,c.mockConnectorDefArray=r,c.connectorShape=o,o.getDrawable().init(o,i),n.init(c,i),c}return o(e,t),e.prototype.getShapePoints=function(){return this.connectorShape.getShapePoints()},Object.defineProperty(e.prototype,"mockConnectorDefArray",{get:function(){return this._mockConnectorDefArray},set:function(t){this._mockConnectorDefArray=t},enumerable:!0,configurable:!0}),e.prototype.getEngineConnectorDefArray=function(){return this.mockConnectorDefArray},Object.defineProperty(e.prototype,"connectorShape",{get:function(){return this._connectorShape},set:function(t){this._connectorShape=t},enumerable:!0,configurable:!0}),e.prototype.containsWorldPosition=function(t){return this.connectorShape.containsWorldPosition(t)},Object.defineProperty(e.prototype,"drawableConnector",{get:function(){return this._drawableConnector},set:function(t){this._drawableConnector=t},enumerable:!0,configurable:!0}),e}(r.MockShape);n.MockConnector=i},{"./mockshape":21}],17:[function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../connectors/engineconnectordef"),i=function(t){function e(e,n){return t.call(this,n.engineShape,n.connectorPositioner,n.length,n.stiffness)||this}return o(e,t),e.prototype.init=function(){},Object.defineProperty(e.prototype,"mockShape",{get:function(){return this._mockShape},set:function(t){this._mockShape=t},enumerable:!0,configurable:!0}),e}(r.EngineConnectorDef);n.MockConnectorDef=i},{"../../connectors/engineconnectordef":13}],18:[function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("./mockshape"),i=t("../../../display/worlddisplay"),s=function(t){function e(e,n,o,r,s,c,a){var l=t.call(this,e,n,s,c)||this;return l.radius=r,l.numberOfSides=o,l.polygonPointArray=i.WorldDisplay.getPolygonPoints(0,o,r,s),n.init(l,c),l}return o(e,t),e.prototype.containsWorldPosition=function(t){var e=0,n=0,o=!1;for(e=0,n=this.polygonPointArray.length-1;e<this.polygonPointArray.length;n=e++){var r=this.polygonPointArray[e],i=this.polygonPointArray[n];r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o},e.prototype.getRadius=function(){return this.radius},e.prototype.getNumberOfSides=function(){return this.numberOfSides},e.prototype.getShapePoints=function(){return this.polygonPointArray},e.prototype.getPointList=function(){return this.polygonPointArray},e.prototype.translate=function(e){t.prototype.translate.call(this,e);for(var n=0;n<this.polygonPointArray.length;n++)this.polygonPointArray[n].translate(this.getWorldPosition())},e.prototype.setWorldPosition=function(e){t.prototype.setWorldPosition.call(this,e),this.polygonPointArray=i.WorldDisplay.getPolygonPoints(0,this.numberOfSides,this.radius,this.getWorldPosition())},e.prototype.getPolygonPoints=function(){return this.polygonPointArray},Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"polygonPointArray",{get:function(){return this._polygonPointArray},set:function(t){this._polygonPointArray=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfSides",{get:function(){return this._numberOfSides},set:function(t){this._numberOfSides=t},enumerable:!0,configurable:!0}),e}(r.MockShape);n.MockPolygon=s},{"../../../display/worlddisplay":10,"./mockshape":21}],19:[function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("../../../world/worldposition"),i=t("./mockshape"),s=function(t){function e(e,n,o,r,i,s,c){var a=t.call(this,e,n,i,s)||this;return a.width=o,a.height=r,n.init(a,s),a}return o(e,t),e.prototype.setSize=function(t,e){this.width=t,this.height=e},e.prototype.containsWorldPosition=function(t){return this.getWorldPosition().x-this.getWidth()/2<=t.x&&this.getWorldPosition().x+this.getWidth()/2>=t.x&&this.getWorldPosition().y-this.getHeight()/2<=t.y&&this.getWorldPosition().y+this.getHeight()/2>=t.y},e.prototype.getShapePoints=function(){var t=Array();return t.push(new r.WorldPosition(this.getWorldPosition().x+this.getWidth()/2,this.getWorldPosition().y+this.getHeight()/2)),t.push(new r.WorldPosition(this.getWorldPosition().x+this.getWidth()/2,this.getWorldPosition().y-this.getHeight()/2)),t.push(new r.WorldPosition(this.getWorldPosition().x-this.getWidth()/2,this.getWorldPosition().y-this.getHeight()/2)),t.push(new r.WorldPosition(this.getWorldPosition().x-this.getWidth()/2,this.getWorldPosition().y+this.getHeight()/2)),t},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!0,configurable:!0}),e}(i.MockShape);n.MockRectangle=s},{"../../../world/worldposition":27,"./mockshape":21}],20:[function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("./mockrectangle"),i=function(t){function e(e,n,o,r,i,s,c){var a=t.call(this,e,n,o,r,i,s,c)||this;return a.drawableText=n,a}return o(e,t),e.prototype.setText=function(t){this.drawableText.setText(t)},e.prototype.getText=function(){return this.drawableText.getText()},Object.defineProperty(e.prototype,"drawableText",{get:function(){return this._drawableText},set:function(t){this._drawableText=t},enumerable:!0,configurable:!0}),e}(r.MockRectangle);n.MockRectangleText=i},{"./mockrectangle":19}],21:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e,n,o){this.worldId=t,this.drawable=e,this.isObjectAnimated=!0,this.isObjectVisable=!0,this.isObjectSelected=!1,this.drawable=e,this.position=n,this.worldObjectEventHandler=this.createMouseEventHandler()}return t.prototype.stopRotation=function(){},t.prototype.createMouseEventHandler=function(){return{pointerDownEvent:function(t,e,n){},pointerMoveEvent:function(t,e,n){},pointerUpEvent:function(t,e,n){}}},t.prototype.getWorldObjectEventHandler=function(){return this.worldObjectEventHandler},t.prototype.setWorldObjectEventHandler=function(t){this.worldObjectEventHandler=t},t.prototype.isAnimated=function(){
return this.isObjectAnimated},t.prototype.isSelected=function(){return this.isObjectSelected},t.prototype.isVisable=function(){return this.isObjectVisable},t.prototype.getWorldId=function(){return this.worldId},t.prototype.getOptions=function(){return this.objectOptions},t.prototype.setAnimated=function(t){this.isObjectAnimated=t},t.prototype.setSelected=function(t){this.isObjectSelected=t},t.prototype.setVisable=function(t){this.isObjectVisable=t},t.prototype.scaleShape=function(t,e){console.error("scaleShape NOT IMPLMENTED")},t.prototype.getWorldPosition=function(){return this.position},t.prototype.setWorldPosition=function(t){this.position.setWorldPosition(t)},t.prototype.translate=function(t){this.position.translate(t)},Object.defineProperty(t.prototype,"worldObjectEventHandler",{get:function(){return this._worldObjectEventHandler},set:function(t){this._worldObjectEventHandler=t},enumerable:!0,configurable:!0}),t.prototype.getDrawable=function(){return this.drawable},Object.defineProperty(t.prototype,"drawable",{get:function(){return this._drawable},set:function(t){this._drawable=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"worldId",{get:function(){return this._worldId},set:function(t){this._worldId=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isObjectAnimated",{get:function(){return this._isObjectAnimated},set:function(t){this._isObjectAnimated=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isObjectVisable",{get:function(){return this._isObjectVisable},set:function(t){this._isObjectVisable=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isObjectSelected",{get:function(){return this._isObjectSelected},set:function(t){this._isObjectSelected=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"objectOptions",{get:function(){return this._objectOptions},set:function(t){this._objectOptions=t},enumerable:!0,configurable:!0}),t}();n.MockShape=o},{}],22:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./display/canvas/canvasholderhtml"),r=t("./engine/mockengine/mockengine"),i=t("./world/worldofworldobjects"),s=t("./test1");n.mockEngine=new r.MockEngine,n.world=new i.WorldOfWorldObjects(n.mockEngine),n.canvasHolder=new o.CanvasHolderHTML("worldCanvas",n.world),n.test1=new s.Test1(n.mockEngine,n.world,n.canvasHolder)},{"./display/canvas/canvasholderhtml":1,"./engine/mockengine/mockengine":14,"./test1":23,"./world/worldofworldobjects":26}],23:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t("./display/drawableshapes/circledisplayshape"),r=t("./world/worldposition"),i=t("./world/worldid"),s=t("./display/drawableshapes/rectangledisplayshape"),c=t("./display/drawableshapes/textdisplayshape"),a=t("./display/drawableshapes/polygondisplayshape"),l=t("./engine/connectors/engineconnectordef"),u=t("./display/drawableshapes/lineconnectordisplay"),p=t("./engine/connectors/connectorpositioners/positionerlockx"),d=t("./engine/connectors/connectorpositioners/positionerlockxy"),h=function(){function t(t,e,n){function h(){e.drawWorld(n)}var f=e.worldEngine.createCircle(new i.WorldId("circle1"),new o.CircleDisplayShape,30,8,new r.WorldPosition(400,400),{restitution:.9}),g=e.worldEngine.createCircle(new i.WorldId("circle2"),new o.CircleDisplayShape,40,8,new r.WorldPosition(300,300),{restitution:.9}),y=e.worldEngine.createRectangle(new i.WorldId("rectangle1"),new s.RectangleDisplayShape,40,40,new r.WorldPosition(100,100),{}),b=e.worldEngine.createPolygon(new i.WorldId("polygon1"),new a.PolygonDisplayShape,5,40,new r.WorldPosition(400,100),{}),w=e.worldEngine.createTextBox(new i.WorldId("textbox1"),new c.TextDisplayShape(new s.RectangleDisplayShape,"SomeText Mg\nAnd more text Mg"),100,100,new r.WorldPosition(550,550),{}),P=e.worldEngine.createTextBox(new i.WorldId("textbox2"),new c.TextDisplayShape(new s.RectangleDisplayShape,"hey there friend Mg"),100,100,new r.WorldPosition(150,350),{}),v=e.worldEngine.createTextBox(new i.WorldId("textbox3"),new c.TextDisplayShape(new s.RectangleDisplayShape,"SomeText Mg\nAnd more text Mg\nSomeText Mg\nAnd more text Mg\nSomeText Mg\nAnd more text Mg\nSomeText Mg\nAnd MOOORE text Mg"),100,100,new r.WorldPosition(550,250),{}),O=new l.EngineConnectorDef(w,new p.PositionerLockX,200,.01),_=new l.EngineConnectorDef(P,new d.PositionerLockY,200,.01),m=e.worldEngine.createCircle(new i.WorldId("c1Circle"),new o.CircleDisplayShape,40,8,new r.WorldPosition(300,300),{restitution:.9}),W=e.worldEngine.createConnector(new i.WorldId("connector1"),new u.LineConnectorDisplay,m,[O,_],{});e.addWorldObject(f),e.addWorldObject(g),e.addWorldObject(y),e.addWorldObject(b),e.addWorldObject(w),e.addWorldObject(P),e.addWorldObject(v),e.addWorldObject(W),e.addWorldObject(m),e.addWorldObject(e.worldEngine.getMouseAnchor()),t.createBounds(n.getWidth(),n.getHeight(),{restitution:.9});console.log("drawing every : "+1e3/30+"ms"),setInterval(h,1e3/30),t.startEngine()}return t}();n.Test1=h},{"./display/drawableshapes/circledisplayshape":5,"./display/drawableshapes/lineconnectordisplay":6,"./display/drawableshapes/polygondisplayshape":7,"./display/drawableshapes/rectangledisplayshape":8,"./display/drawableshapes/textdisplayshape":9,"./engine/connectors/connectorpositioners/positionerlockx":11,"./engine/connectors/connectorpositioners/positionerlockxy":12,"./engine/connectors/engineconnectordef":13,"./world/worldid":25,"./world/worldposition":27}],24:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t){this.worldEngine=t}return Object.defineProperty(t.prototype,"worldEngine",{get:function(){return this._worldEngine},set:function(t){this._worldEngine=t},enumerable:!0,configurable:!0}),t}();n.World=o},{}],25:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t){this.id=t}return t.prototype.matches=function(t){return this.id==t.id},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),t}();n.WorldId=o},{}],26:[function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=t("./world"),i=function(t){function e(e){var n=t.call(this,e)||this;return n.worldObjectArray=new Array,n}return o(e,t),e.prototype.drawWorld=function(t){var e=t.getContext();t.clearCanvas();for(var n=0;n<this.worldObjectArray.length;n++){this.worldObjectArray[n].getDrawable().draw(e)}},e.prototype.addWorldObject=function(t){this.worldObjectArray.push(t)},e.prototype.getWorldObjectMatchingWorldId=function(t){for(var e=null,n=0;n<this.worldObjectArray.length;n++){var o=this.worldObjectArray[n];o.getWorldId().matches(t)&&(e=o)}return e},e.prototype.getWorldObjectContainingPosition=function(t){for(var e=null,n=0;n<this.worldObjectArray.length;n++){var o=this.worldObjectArray[n];o.containsWorldPosition(t)&&o!=this.worldEngine.getMouseAnchor()&&(e=o)}return e},Object.defineProperty(e.prototype,"worldObjectArray",{get:function(){return this._worldObjectArray},set:function(t){this._worldObjectArray=t},enumerable:!0,configurable:!0}),e}(r.World);n.WorldOfWorldObjects=i},{"./world":24}],27:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){this.x=t,this.y=e}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.translate=function(t){this.x=t.x,this.y=t.y},t.prototype.setWorldPosition=function(t){this.x=t.x,this.y=t.y},t.prototype.getDeltaY=function(t){return this.y-t.y},t.prototype.getDeltaX=function(t){return this.x-t.x},t.prototype.getDelta=function(e){return new t(this.getDeltaX(e),this.getDeltaY(e))},t.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},t.prototype.getDistance=function(t){return Math.sqrt(Math.pow(this.getDeltaX(t),2)+Math.pow(this.getDeltaY(t),2))},t.getAveragePostionFromWorldPositionList=function(e){for(var n=0,o=0,r=0;r<e.length;r++){var i=e[r];n+=i.x,o+=i.y}return n/=e.length,o/=e.length,new t(n,o)},t.getAveragePostionFromWorldObjectList=function(e){for(var n=0,o=0,r=0;r<e.length;r++){var i=e[r].getWorldPosition();n+=i.x,o+=i.y}return n/=e.length,o/=e.length,new t(n,o)},t.getPostionListFromNodeList=function(t){for(var e=new Array,n=0;n<t.length;n++)e.push(t[n].getWorldPosition());return e},t}();n.WorldPosition=o},{}]},{},[22])(22)});
//# sourceMappingURL=test_mock.min.js.map
